---
title: Git 与 GitHub 常用场景用法总结
summary: 如何用系统化的方式理解产品设计中的对话与反馈循环。
pubDate: 2025-10-06
---
Git 是一个强大的分布式版本控制系统，而 GitHub 则是目前最流行的代码托管平台。本文将根据实际使用场景，总结一系列常用的 Git 和 GitHub 命令，帮助你更高效地进行代码版本管理和团队协作。

### 场景一：初始化一个新的本地仓库并开始工作

当你开始一个全新的项目，需要在本地创建一个 Git 仓库来管理代码时。

1.  **初始化仓库**
    在你的项目文件夹根目录下，执行以下命令来创建一个新的 Git 仓库。这会生成一个隐藏的 `.git` 目录，用于追踪版本历史。
    ```bash
    git init
    ```

2.  **配置用户信息**
    在首次提交代码前，你需要设置你的名字和邮箱，这样 Git 才知道是谁提交了代码。
    ```bash
    git config --global user.name "你的名字"
    git config --global user.email "你的邮箱地址"
    ```

3.  **添加文件到暂存区**
    在工作区创建或修改文件后，使用 `git add` 命令将这些变动添加到暂存区，准备进行下一次提交。
    *   添加单个文件：
        ```bash
        git add <文件名>
        ```
    *   添加所有变更的文件：
        ```bash
        git add .
        ```

4.  **提交变更**
    使用 `git commit` 命令将暂存区的内容提交到本地仓库，形成一个版本快照。
    ```bash
    git commit -m "你的提交信息"
    ```
    提交信息应当清晰明了，描述本次提交的主要内容。

5.  **查看仓库状态**
    随时可以使用 `git status` 来查看当前工作区和暂存区的状态，了解哪些文件被修改过、哪些文件已暂存。
    ```bash
    git status
    ```

6.  **关联远程仓库并推送**
    当你在本地完成首次提交后，通常需要将代码推送到一个远程仓库（例如在 GitHub 上创建的空仓库）进行托管。

    *   **首先，关联远程仓库**：
        你需要先在 GitHub 等平台创建一个新的空仓库，然后复制其 URL。执行以下命令，将你的本地仓库与这个远程仓库关联起来。`origin` 是远程仓库的默认别名。
        ```bash
        git remote add origin <你的远程仓库URL>
        ```

    *   **然后，推送本地提交**：
        使用 `git push` 命令将本地的提交推送到远程仓库。第一次推送时，使用 `-u` 参数可以将本地的 `main` 分支与远程的 `origin/main` 分支关联起来，方便以后的推送操作。
        ```bash
        git push -u origin main
        ```
        *(注意：一些旧的仓库可能使用 `master` 作为默认主分支名)*

        完成这次推送后，以后再有新的本地提交，只需简单地执行 `git push` 即可。


### 场景二：作为团队成员，克隆并直接更新项目

这个场景**适用于拥有直接向仓库推送（push）代码权限**的情况。例如，在公司内部团队项目或你自己的个人项目中。

1.  **克隆远程仓库**
    使用 `git clone` 命令将远程仓库完整地复制到你的本地电脑上。克隆操作会自动将远程仓库设置为名为 `origin` 的默认远程地址。
    ```bash
    git clone <远程仓库URL>
    ```

2.  **进行修改、暂存和提交**
    这个流程和场景一中的步骤 3 和 4 完全一样。你可以在本地任意修改代码，然后通过 `git add` 和 `git commit` 来保存你的变更。

3.  **拉取远程仓库的最新变更（重要！）**
    在推送你自己的修改之前，**务必**先拉取远程仓库的最新代码，并与你的本地修改合并。这可以避免因其他成员已推送更新而导致的冲突。
    ```bash
    git pull origin main
    ```
    *(如果 `git pull` 导致了合并冲突，你需要先在本地解决这些冲突，然后再进行提交。)*

4.  **推送本地提交到远程仓库**
    在确保本地代码已包含远程最新变更且没有冲突后，将你的提交推送到远程仓库，以便团队其他成员可以看到。
    ```bash
    git push origin main
    ```

### 场景三：使用分支进行功能开发或Bug修复

为了不影响主分支的稳定性，通常会在新的分支上进行开发或修复工作，完成后再合并回主分支。

1.  **查看分支**
    *   查看所有本地分支：
        ```bash
        git branch
        ```
    *   查看所有本地和远程分支：
        ```bash
        git branch -a
        ```

2.  **创建并切换到新分支**
    使用 `git checkout -b` 可以一步完成创建新分支并切换到该分支的操作。
    ```bash
    git checkout -b <新分支名>
    ```
    这相当于以下两条命令的组合：
    ```bash
    git branch <新分支名>
    git checkout <新分支名>
    ```

3.  **在分支上进行开发**
    在新分支上，你可以像在主分支上一样进行代码的修改、添加和提交。这些操作都只发生在你当前所在的分支上，不会影响其他分支。

4.  **合并分支**
    当功能开发完成或 Bug 修复后，需要将该分支的修改合并回主分支（例如 `main`）。
    *   首先，切换回主分支：
        ```bash
        git checkout main
        ```
    *   然后，确保主分支是最新状态：
        ```bash
        git pull origin main
        ```
    *   最后，合并你的功能分支：
        ```bash
        git merge <你的功能分支名>
        ```

5.  **删除已合并的分支**
    分支合并后，如果不再需要，可以将其删除。
    ```bash
    git branch -d <已合并的分支名>
    ```

### 场景四：通过 Pull Request (PR) 进行协作

Pull Request (PR) 是 GitHub 协作的核心。它允许开发者在不直接修改主分支的情况下，提出自己的代码变更，并邀请他人进行审查（Code Review）。根据你是否拥有目标仓库的**写入权限**，PR 的工作流分为两种主要模式。

#### 模式一：为无写入权限的项目做贡献 (Fork & Pull)

这是最常见的**开源协作模式**。因为你不能直接向原始仓库推送代码，所以需要先 **Fork** 一份项目到自己的账户下，完成修改，然后从你的 Fork 仓库发起 PR。

1.  **Fork 原始仓库**
    在 GitHub 页面上，点击原始项目右上角的 "Fork" 按钮，将该项目的一个副本创建到你自己的 GitHub 账户下。这个副本是属于你的，你拥有完全的写入权限。

2.  **克隆你自己 Fork 的仓库**
    将你账户下的仓库克隆到本地。
    ```bash
    git clone <你fork的仓库URL>
    ```

3.  **关联原始仓库 (Upstream)**
    为了能方便地同步原始仓库的更新，需要将原始仓库添加为一个新的远程仓库地址，通常命名为 `upstream`。
    ```bash
    git remote add upstream <原始仓库的URL>
    ```
    你可以通过 `git remote -v` 查看所有已配置的远程仓库。

4.  **创建新分支进行开发**
    在本地为你的新功能或修复创建一个新的分支。
    ```bash
    git checkout -b <新功能分支名>
    ```

5.  **提交并推送到你的 Fork 仓库**
    完成代码修改后，提交变更，并将其推送到**你自己的 Fork 仓库**中。
    ```bash
    git add .
    git commit -m "完成了新功能"
    git push origin <新功能分支名>
    ```

6.  **创建 Pull Request**
    推送到你自己的仓库后，在你的 GitHub 仓库页面上，你会看到一个提示，可以方便地创建一个 Pull Request。点击该按钮，填写标题和描述，将你的分支提交到**原始仓库**进行审查。

7.  **代码审查与合并**
    原始仓库的维护者会审查你的代码，可能会提出修改意见。 如果有需要，你可以在本地继续修改并推送到你的分支，Pull Request 会自动更新。一旦代码被批准，维护者就可以将其合并到主分支中。

8.  **同步更新**
    为了保持你的 Fork 仓库与原始项目同步，可以定期执行以下操作：
    ```bash
    git checkout main
    git pull upstream main
    git push origin main
    ```

#### 模式二：在有写入权限的项目中协作 (分支 PR)

在**公司团队**或你自己的项目中，你通常拥有写入权限。这时，**无需 Fork**，可以直接在主仓库中创建分支进行开发，然后发起 PR 以便团队进行代码审查。

1.  **克隆主仓库**
    和场景二一样，直接克隆你拥有权限的仓库。
    ```bash
    git clone <主仓库URL>
    ```

2.  **创建并切换到新分支**
    为你的任务创建一个新的、有意义的分支名。
    ```bash
    git checkout -b <新功能分支名>
    ```

3.  **开发、暂存和提交**
    在你的新分支上完成代码修改并提交。

4.  **推送新分支到主仓库**
    将你的本地分支推送到远程主仓库 (`origin`)。因为你有权限，这一步会成功。
    ```bash
    git push origin <新功能分支名>
    ```

5.  **创建 Pull Request**
    推送成功后，访问 GitHub 上的主仓库页面，你会看到一个创建 PR 的提示。点击后，选择你的功能分支作为源，`main` 或 `develop` 作为目标，发起 PR 供团队成员审查。这个 PR 是在**同一个仓库内部**进行的。